function comboBoxController(a,b,c,d){function e(){var b=g(a.comboModel),c=i(a.comboModel);a.isValid=!a.required||!b&&!c}function f(b){a.isOtherSelected=h(b),a.selected=g(b)?{value:""}:l(b)}function g(a){var b=void 0===a||null===a||""===a.value;return b}function h(a){return!g(a)&&"string"==typeof a.value&&"other"===a.value.toLowerCase()}function i(a){return h(a)&&(void 0===a.text||null===a.text||""===a.text)}function j(d){a.isOtherSelected=h(d),g(d)?a.comboModel=k(null,null):a.isOtherSelected?(k("other",a.otherText),c(function(){b.find("input")[0].focus()})):k(d.value,d.text)}function k(b,c){(null===a.comboModel||void 0===a.comboModel)&&(a.comboModel={}),a.comboModel.value=b,a.comboModel.text=c,e()}function l(b){var c=d("filter")(a.options,{value:b.value},!0);return c.length>0?c[0]:null}a.setModelFromInput=j,a.isOtherSelected=!1,a.otherText=null,a.isValid=!1,a.comboModel&&f(a.comboModel),a.$watch("comboModel",function(a){var c=document.activeElement!=b.find("input")[0];c&&f(a),e()}),a.$watch("isValid",function(){e()})}angular.module("ngComboBox.controller",[]).controller("comboBoxController",["$scope","$element","$timeout","$filter",comboBoxController]),angular.module("ngComboBox.directive",[]).directive("comboBox",function(){return{restrict:"E",scope:{options:"=",comboModel:"=",label:"@?",inputClass:"=",selectClass:"=",required:"=",isValid:"=",isOtherSelected:"="},templateUrl:"combo-box.html",compile:function(a,b){b.otherLabel||(b.otherLabel="Other"),b.label||(b.label="")},controller:"comboBoxController"}}),angular.module("ngComboBox",["ngComboBox.directive","ngComboBox.controller","templates-main"]),angular.module("templates-main",["combo-box.html"]),angular.module("combo-box.html",[]).run(["$templateCache",function(a){a.put("combo-box.html",'<ng-form name="comboForm">\n	<select name="comboSelect" ng-model="selected" ng-class="selectClass" ng-change="setModelFromInput(selected)" ng-options="option.text for option in options" ng-required="required">\n		<option value="">{{label}}</option>\n	</select>\n	<br />\n	<input name="comboText" type="text" placeholder="Other" ng-model="otherText" ng-class="inputClass" ng-change="setModelFromInput(selected)" ng-show="isOtherSelected" ng-required="required && isOtherSelected" />\n</ng-form>\n')}]);