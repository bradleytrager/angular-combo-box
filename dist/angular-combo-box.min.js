function comboBoxController(a,b,c,d){function e(b){var c=null===b||""===b.value,d=null;b&&(d=g(b.value)),a.isOtherSelected=!1,c?a.selected="":d?a.selected=value:(a.selected={value:"other",text:a.otherTextLabel},a.isOtherSelected=!0,b&&(a.otherText=b.text))}function f(d){var e=""===d,f=g(d);a.isOtherSelected=!1,e?a.comboModel=null:f?a.comboModel=f:(a.comboModel={value:"other",text:a.otherText},a.isOtherSelected=!0,c(function(){b.find("input")[0].focus()}))}function g(b){var c=d("filter")(a.options,{value:b},!0);return c.length>0?c[0]:null}a.setModelFromInput=f,a.isOtherSelected=!1,a.comboModel&&e(a.comboModel),a.$watch("comboModel",function(a){var c=document.activeElement!=b.find("input")[0];c&&e(a)})}angular.module("ngComboBox.controller",[]).controller("comboBoxController",["$scope","$element","$timeout","$filter",comboBoxController]),angular.module("ngComboBox.directive",[]).directive("comboBox",function(){return{restrict:"E",scope:{options:"=",comboModel:"=",otherLabel:"@?",label:"@?",inputClass:"=",selectClass:"=",isOtherSelected:"=",otherText:"="},templateUrl:"combo-box.html",compile:function(a,b){b.otherLabel||(b.otherLabel="Other"),b.label||(b.label="")},controller:"comboBoxController"}}),angular.module("ngComboBox",["ngComboBox.directive","ngComboBox.controller","templates-main"]),angular.module("templates-main",["combo-box.html"]),angular.module("combo-box.html",[]).run(["$templateCache",function(a){a.put("combo-box.html",'<select ng-model="selected" ng-class="selectClass" ng-change="setModelFromInput(selected)">\n    <option value="">{{label}}</option>\n    <option ng-repeat="option in options" value="{{option.value}}">{{option.text}}</option>\n    <option value="other" ng-bind="otherLabel">other</option>\n</select>\n<br />\n<input type="text" placeholder="Other" ng-model="otherText" ng-class="inputClass" ng-change="setModelFromInput(selected)" ng-show="isOtherSelected" />\n')}]);