function comboBoxController(a,b,c,d){function e(){var b=i(a.comboModel),c=k(a.comboModel);a.isValid=!a.required||!b&&!c,a.comboForm.$setValidity("comboRequired",a.isValid)}function f(b){a.isOtherSelected=j(b),a.selected=i(b)?{value:""}:l(b)}function g(d){a.isOtherSelected=j(d),i(d)?a.comboModel=h(null,null):a.isOtherSelected?(h("other",a.otherText),c(function(){b.find("input")[0].focus()})):h(d.value,d.text)}function h(b,c){(null===a.comboModel||void 0===a.comboModel)&&(a.comboModel={}),a.comboModel={value:b,text:c},e()}function i(a){var b=void 0===a||null===a||""===a.value;return b}function j(a){return!i(a)&&"string"==typeof a.value&&"other"===a.value.toLowerCase()}function k(a){return j(a)&&(void 0===a.text||null===a.text||""===a.text)}function l(b){var c=d("filter")(a.options,{value:b.value},!0);return c.length>0?c[0]:null}a.setModelFromInput=g,a.isOtherSelected=!1,a.otherText=null,a.isValid=!1,a.comboModel&&f(a.comboModel),a.$watch("comboModel",function(a){var c=document.activeElement!=b.find("input")[0];c&&f(a),e()}),a.$watch("required",function(){e()})}angular.module("ngComboBox.controller",[]).controller("comboBoxController",["$scope","$element","$timeout","$filter",comboBoxController]),angular.module("ngComboBox.directive",[]).directive("comboBox",function(){return{restrict:"E",scope:{options:"=",comboModel:"=",label:"@?",inputClass:"=",selectClass:"=",required:"=",isValid:"=",isOtherSelected:"="},templateUrl:"combo-box.html",compile:function(a,b){b.otherLabel||(b.otherLabel="Other"),b.label||(b.label="")},controller:"comboBoxController"}}),angular.module("ngComboBox",["ngComboBox.directive","ngComboBox.controller","templates-main"]),angular.module("templates-main",["combo-box.html"]),angular.module("combo-box.html",[]).run(["$templateCache",function(a){a.put("combo-box.html",'<ng-form name="comboForm">\n	<select name="comboSelect" \n			ng-model="selected" \n			ng-class="selectClass" \n			ng-change="setModelFromInput(selected)" \n			ng-options="option.text for option in options track by option.value" \n			ng-required="required">\n		<option value="">{{label}}</option>\n	</select>\n	<br />\n	<input 	name="comboText" \n			type="text" \n			placeholder="Other" \n			ng-model="otherText" \n			ng-class="inputClass" \n			ng-change="setModelFromInput(selected)" \n			ng-show="isOtherSelected" \n			ng-required="required && isOtherSelected" />\n</ng-form>\n')}]);